---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-csi-config
  namespace: {{ .Release.Namespace }}
{{ include "carina-node.labels" . | indent 2 }}
data:
  config.json: |-
    {
      "diskSelector": [
        {
          "name": "{{ .Values.storage.lvm.disktype }}" ,
          "re": ["{{ .Values.storage.lvm.re }}"],
          "policy": "LVM",
          "nodeLabel": "{{ .Values.storage.lvm.nodeLabel }}"
        },
        {
          "name": "{{ .Values.storage.raw.disktype }}",
          "re": ["{{ .Values.storage.raw.re }}"],
          "policy": "RAW",
          "nodeLabel": "{{ .Values.storage.raw.nodeLabel }}"
        }         
      ],
      "diskScanInterval": "300",
      "schedulerStrategy": "spreadout"
    }